<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Slide Generation</title>
    
    <!-- CDN Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --bg-main: #f6f9fc;
            --color-card: #ffffff;
            --color-primary: #002b55; /* Dark Navy */
            --color-secondary: #007acc; /* Mid Blue */
            --color-accent: #f9578f;   /* Pink */
            --color-accent-light: rgba(249, 87, 143, 0.2);
            --color-secondary-light: rgba(0, 122, 204, 0.2);
            --color-text-light: #f0f0f0;
            --color-text-dark: #333333;
            --color-border: #e0e6ed;

            --space-gap: 12px;
            --space-padding: 16px;
            
            --font-family: "Segoe UI", "Roboto", "Arial", sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            background-color: #e0e0e0;
            font-family: var(--font-family);
            color: var(--color-text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        #slide-container {
            width: 1920px;
            height: 1080px;
            background-color: var(--bg-main);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 1px solid #ccc;
            position: relative;
            overflow: hidden;
            transform-origin: top left;
        }

        #main-content {
            width: 100%;
            height: 100%;
            padding: var(--space-gap);
            display: flex;
            gap: var(--space-gap);
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: var(--space-gap);
            height: 100%;
        }
        .column-1 { flex: 3; } /* Roughly 60% */
        .column-2 { flex: 2; } /* Roughly 40% */

        .component-card {
            background-color: var(--color-card);
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,.06);
            padding: var(--space-padding);
            border: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative; /* Changed for interact.js relative transforms */
            touch-action: none;
            min-width: 300px;
            min-height: 200px;
            overflow: hidden; /* Prevent content from spilling during resize */
        }
        
        .component-card:hover .action-buttons {
            opacity: 1;
        }

        .action-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            padding: 4px 8px;
            border-radius: 16px;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            z-index: 10;
        }

        .action-buttons button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--color-secondary);
            font-size: 16px;
        }
        .action-buttons button:hover {
            color: var(--color-accent);
        }
        
        .card-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
            padding-bottom: 8px;
            border-bottom: 2px solid var(--color-border);
            margin-bottom: 8px;
        }

        .sub-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-secondary);
            margin-bottom: 10px;
        }
        
        p, span {
            font-size: 16px;
            line-height: 1.6;
        }

        ul {
            list-style: none;
            padding-left: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 16px;
            line-height: 1.5;
            position: relative;
        }

        li:hover .action-buttons-inline {
            opacity: 1;
        }

        .action-buttons-inline {
            display: inline-flex;
            gap: 6px;
            opacity: 0;
            transition: opacity 0.2s;
            margin-left: auto;
            padding-left: 10px;
        }

        .action-buttons-inline button {
            background: none; border: none; cursor: pointer; color: var(--color-secondary); font-size: 14px;
        }
        .action-buttons-inline button:hover { color: var(--color-accent); }

        li .icon {
            color: var(--color-secondary);
            font-size: 18px;
            margin-top: 2px;
            width: 20px;
            text-align: center;
        }

        [contenteditable] {
            outline: none;
            padding: 2px 4px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        [contenteditable]:hover,
        [contenteditable]:focus {
            background-color: rgba(0, 122, 204, 0.1);
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.3);
        }

        /* Component-specific styles */
        .kpi-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--space-gap);
            margin-top: 10px;
        }
        .kpi-item {
            background-color: var(--bg-main);
            padding: 16px;
            border-radius: 6px;
            border: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
        }
        .kpi-label {
            font-size: 14px;
            color: var(--color-secondary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .kpi-value {
            font-size: 26px;
            font-weight: 600;
            color: var(--color-primary);
        }
        .kpi-value.badge {
            background-color: var(--color-accent);
            color: white;
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 20px;
        }

        .chart-container {
            flex-grow: 1;
            position: relative;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }
        
        .composite-element {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .composite-element.chart-wrapper {
            flex-grow: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }
        .composite-element .description {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
        }
        
        .columns-container {
            display: flex;
            gap: var(--space-gap);
            width: 100%;
            flex-grow: 1;
        }

        .list-column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .list-column-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 12px;
        }
        
        .text-block-content {
            background-color: var(--bg-main);
            border-radius: 6px;
            padding: 16px;
            border-left: 4px solid var(--color-secondary);
        }

    </style>
</head>
<body>

    <div id="slide-container">
        <div id="main-content">
            <!-- Components will be dynamically inserted here -->
        </div>
    </div>

    <script>
        const INPUT_JSON = {
          "components": [
            {
              "componentType": "financialPerformanceSnapshot",
              "renderBlock": {
                "type": "COMPOSITE",
                "title": "Financial Performance",
                "elements": [
                  {
                    "type": "SUMMARY_WITH_KPIS",
                    "title": "Financial Snapshot",
                    "description": "Key performance indicators for FY2024 and historical revenue CAGR.",
                    "kpis": [
                      { "label": "FY24 Revenue", "value": "995.27M INR" },
                      { "label": "Revenue CAGR", "value": "26.1%" },
                      { "label": "FY24 EBITDA", "value": "204.83M INR" },
                      { "label": "FY24 EBITDA Margin", "value": "20.6%" },
                      { "label": "ROCE", "value": "26.06%" }
                    ]
                  },
                  {
                    "type": "CHART",
                    "title": "Historical Performance (INR Millions)",
                    "chartType": "COMBO",
                    "data": {
                      "labels": ["2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024"],
                      "datasets": [
                        { "name": "Revenue", "type": "BAR", "values": [165.65, 176.72, 247.28, 308.19, 416.84, 418.04, 496.59, 857.88, 751.58, 995.27] },
                        { "name": "EBITDA", "type": "LINE", "values": [13.72, 18.03, 38.26, 53.64, 83.86, 78.37, 124.52, 245.36, 101.17, 204.83] }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "componentType": "strategicCompetitiveAdvantages",
              "renderBlock": {
                "type": "COLUMNAR_LISTS",
                "title": "Strategic & Competitive Advantages",
                "columns": [
                  { "title": "Differentiation Factors", "items": ["High-quality tin cans & components manufacturer/exporter", "Diverse product portfolio for various industries", "Strong commitment to quality & innovation", "60M annual production capacity (single shift)", "30k+ sq. mts manufacturing infrastructure", "~27% revenue CAGR over the last decade", "Global export presence across multiple continents", "Established in 1981, with extensive experience"] },
                  { "title": "Market Positioning", "items": ["Leading B2B manufacturer & exporter in industrial packaging", "Specializes in metal containers for diverse industries", "Strategic focus on global tin market growth", "Expanding product offerings into beverage can sector", "Enhancing presence in emerging markets", "Exploring M&A for portfolio expansion"] }
                ]
              }
            },
            {
              "componentType": "marketOpportunityAndGrowthOutlook",
              "renderBlock": {
                "type": "BULLET_LIST",
                "title": "Market Opportunity & Growth Outlook",
                "items": [
                  "Global Tin Market projected to reach $9.3B by 2030, a 3.91% CAGR.",
                  "Niche potential in Specialty Tin Cans, projected to reach $1.0B by 2035 (4.8% CAGR).",
                  "Growth strategy includes leveraging market growth and expanding into the beverage can sector.",
                  "Focus on geographic expansion in Asia Pacific & Latin America, while exploring M&A."
                ]
              }
            },
            {
              "componentType": "supplyChainAndLogistics",
              "renderBlock": {
                "type": "COMPOSITE",
                "title": "Supply Chain & Logistics",
                "elements": [
                  { "type": "COLUMNAR_LISTS", "title": "Sourcing & Inventory", "columns": [
                      { "title": "Raw Material Sourcing", "items": ["Key materials include tinplate, various cements, oils, and chemicals.", "Sourcing strategy is a mix of global and local suppliers.", "Risk is mitigated through supplier diversification."] },
                      { "title": "Inventory Management", "items": ["Approach employs best practices like audits and forecasting.", "Raw materials, WIP, and finished goods are managed for efficiency."] }
                    ]
                  },
                  { "type": "TEXT_BLOCK", "title": "Finished Goods Distribution", "content": "Utilizes direct B2B sales channels to clients in India and globally. A global distribution network uses ocean and air freight for efficient and timely delivery worldwide." }
                ]
              }
            }
          ]
        };

        const chartInstances = new Map();
        
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            if (!mainContent) {
                console.error('Main content container not found!');
                return;
            }

            renderComponents(INPUT_JSON.components, mainContent);
            initializeInteractivity();
            fitSlideToWindow();
            window.addEventListener('resize', fitSlideToWindow);
        });
        
        function fitSlideToWindow() {
            const container = document.getElementById('slide-container');
            const scaleX = window.innerWidth / container.offsetWidth;
            const scaleY = window.innerHeight / container.offsetHeight;
            const scale = Math.min(scaleX, scaleY) * 0.98; // 98% to leave some margin
            container.style.transform = `scale(${scale})`;
        }

        function renderComponents(components, container) {
            container.innerHTML = ''; // Clear previous content

            const column1 = document.createElement('div');
            column1.className = 'column column-1';

            const column2 = document.createElement('div');
            column2.className = 'column column-2';

            components.forEach((componentData, index) => {
                const renderBlock = componentData.renderBlock;
                const card = document.createElement('div');
                card.className = 'component-card';
                card.id = `component-${Date.now()}-${Math.random()}`;

                // Set initial data attributes for interact.js transform
                card.dataset.x = '0';
                card.dataset.y = '0';

                let contentHTML = `
                    <div class="action-buttons">
                        <button class="duplicate-btn" title="Duplicate"><i class="fa-solid fa-copy"></i></button>
                        <button class="delete-btn" title="Delete"><i class="fa-solid fa-trash"></i></button>
                    </div>
                    <h3 class="card-title" contenteditable="true">${renderBlock.title}</h3>
                `;

                switch (renderBlock.type) {
                    case 'COMPOSITE':
                        contentHTML += renderComposite(renderBlock.elements, card.id);
                        break;
                    case 'COLUMNAR_LISTS':
                        contentHTML += renderColumnarLists(renderBlock.columns);
                        break;
                    case 'BULLET_LIST':
                        contentHTML += renderBulletList(renderBlock.items);
                        break;
                }
                card.innerHTML = contentHTML;
                
                if (index === 0) {
                    card.style.flexGrow = '1'; // Make the first component fill its column
                    column1.appendChild(card);
                } else {
                    column2.appendChild(card);
                }
            });
            
            container.appendChild(column1);
            container.appendChild(column2);

            // Render charts after they are in the DOM and sized by flexbox
            components.forEach((componentData, index) => {
                const renderBlock = componentData.renderBlock;
                if (renderBlock.type === 'COMPOSITE') {
                    renderBlock.elements.forEach(el => {
                        if (el.type === 'CHART') {
                            const card = document.querySelector('.column-1 .component-card'); // Assuming chart is always in the first component
                            if(card) {
                                const chartId = `${card.id}-chart-${el.title.replace(/\s/g, '-')}`;
                                renderChart(chartId, el.data);
                            }
                        }
                    });
                }
            });
        }
        
        function getIconForItem(text) {
            const lowerText = text.toLowerCase();
            if (lowerText.includes('revenue')) return 'fa-solid fa-dollar-sign';
            if (lowerText.includes('cagr')) return 'fa-solid fa-arrow-trend-up';
            if (lowerText.includes('ebitda')) return 'fa-solid fa-sack-dollar';
            if (lowerText.includes('margin')) return 'fa-solid fa-percent';
            if (lowerText.includes('roce')) return 'fa-solid fa-piggy-bank';
            if (lowerText.includes('quality') || lowerText.includes('commitment')) return 'fa-solid fa-award';
            if (lowerText.includes('diverse') || lowerText.includes('portfolio')) return 'fa-solid fa-layer-group';
            if (lowerText.includes('capacity') || lowerText.includes('infrastructure')) return 'fa-solid fa-industry';
            if (lowerText.includes('global') || lowerText.includes('market')) return 'fa-solid fa-globe-americas';
            if (lowerText.includes('experience') || lowerText.includes('established')) return 'fa-solid fa-medal';
            if (lowerText.includes('positioning') || lowerText.includes('leading')) return 'fa-solid fa-crosshairs';
            if (lowerText.includes('growth') || lowerText.includes('expanding')) return 'fa-solid fa-seedling';
            if (lowerText.includes('m&a')) return 'fa-solid fa-handshake';
            if (lowerText.includes('sourcing') || lowerText.includes('materials')) return 'fa-solid fa-truck-ramp-box';
            if (lowerText.includes('inventory')) return 'fa-solid fa-boxes-stacked';
            if (lowerText.includes('distribution')) return 'fa-solid fa-truck-fast';
            if (lowerText.includes('strategy')) return 'fa-solid fa-chess';
            return 'fa-solid fa-circle-notch';
        }
        
        function renderInlineActions() {
             return `<div class="action-buttons-inline">
                        <button class="duplicate-btn-inline" title="Duplicate"><i class="fa-solid fa-copy"></i></button>
                        <button class="delete-btn-inline" title="Delete"><i class="fa-solid fa-trash"></i></button>
                    </div>`;
        }

        function renderComposite(elements, cardId) {
            return elements.map(el => {
                let elementHTML = `<div class="composite-element ${el.type === 'CHART' ? 'chart-wrapper' : ''}">`;
                if(el.title) {
                    elementHTML += `<h4 class="sub-title" contenteditable="true">${el.title}</h4>`;
                }
                if(el.description) {
                    elementHTML += `<p class="description" contenteditable="true">${el.description}</p>`;
                }

                switch (el.type) {
                    case 'SUMMARY_WITH_KPIS':
                        elementHTML += '<div class="kpi-container">';
                        el.kpis.forEach((kpi, index) => {
                            const isBadge = kpi.value.includes('%');
                            elementHTML += `
                                <div class="kpi-item">
                                    <span class="kpi-label"><i class="${getIconForItem(kpi.label)}"></i> ${kpi.label}</span>
                                    <span class="kpi-value ${isBadge ? 'badge' : ''}" contenteditable="true"
                                          data-chart-id="${cardId}-chart-Historical-Performance-(INR-Millions)"
                                          data-kpi-type="${kpi.label.replace(/\s/g, '')}"
                                    >${kpi.value}</span>
                                </div>`;
                        });
                        elementHTML += '</div>';
                        break;
                    case 'CHART':
                        const chartId = `${cardId}-chart-${el.title.replace(/\s/g, '-')}`;
                        elementHTML += `<div class="chart-container"><canvas id="${chartId}"></canvas></div>`;
                        break;
                    case 'COLUMNAR_LISTS':
                        elementHTML += renderColumnarLists(el.columns);
                        break;
                    case 'TEXT_BLOCK':
                        elementHTML += `<div class="text-block-content"><p contenteditable="true">${el.content}</p></div>`;
                        break;
                }
                elementHTML += '</div>';
                return elementHTML;
            }).join('');
        }

        function renderColumnarLists(columns) {
            let html = '<div class="columns-container">';
            columns.forEach(col => {
                html += `
                    <div class="list-column">
                        <h5 class="list-column-title" contenteditable="true">${col.title}</h5>
                        <ul>${col.items.map(item => `<li><span class="icon"><i class="${getIconForItem(item)}"></i></span><span contenteditable="true">${item}</span>${renderInlineActions()}</li>`).join('')}</ul>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        function renderBulletList(items) {
            return `<ul>${items.map(item => `<li><span class="icon"><i class="${getIconForItem(item)}"></i></span><span contenteditable="true">${item}</span>${renderInlineActions()}</li>`).join('')}</ul>`;
        }

        function renderChart(canvasId, data) {
            const ctx = document.getElementById(canvasId);
            if (!ctx) return;
            if (chartInstances.has(canvasId)) {
                chartInstances.get(canvasId).destroy();
            }
            
            const style = getComputedStyle(document.documentElement);
            const colorSecondary = style.getPropertyValue('--color-secondary').trim();
            const colorAccent = style.getPropertyValue('--color-accent').trim();
            const colorSecondaryLight = style.getPropertyValue('--color-secondary-light').trim();
            const colorTextDark = style.getPropertyValue('--color-text-dark').trim();
            const colorBorder = style.getPropertyValue('--color-border').trim();

            const chartData = {
                labels: data.labels,
                datasets: data.datasets.map((ds, index) => ({
                    label: ds.name,
                    data: ds.values,
                    type: ds.type.toLowerCase(),
                    backgroundColor: ds.type === 'BAR' ? colorSecondaryLight : 'transparent',
                    borderColor: ds.type === 'BAR' ? colorSecondary : colorAccent,
                    borderWidth: ds.type === 'BAR' ? 1 : 3,
                    pointBackgroundColor: colorAccent,
                    pointHoverRadius: 7,
                    tension: 0.3,
                    yAxisID: index === 0 ? 'y' : 'y',
                }))
            };

            const chart = new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top', labels: { color: colorTextDark, font: { size: 14 } } },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                        x: { ticks: { color: colorTextDark }, grid: { display: false } },
                        y: { ticks: { color: colorTextDark }, grid: { color: colorBorder } }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                }
            });
            chartInstances.set(canvasId, chart);
        }

        function initializeInteractivity() {
            // Card-level actions
            document.querySelectorAll('.component-card').forEach(card => {
                card.querySelector('.delete-btn')?.addEventListener('click', () => card.remove());
                card.querySelector('.duplicate-btn')?.addEventListener('click', () => {
                    duplicateCard(card);
                });
            });

            // Inline item actions
            document.getElementById('main-content').addEventListener('click', (e) => {
                const deleteBtn = e.target.closest('.delete-btn-inline');
                if (deleteBtn) {
                    deleteBtn.closest('li').remove();
                }

                const duplicateBtn = e.target.closest('.duplicate-btn-inline');
                if (duplicateBtn) {
                    const li = duplicateBtn.closest('li');
                    const clone = li.cloneNode(true);
                    li.parentNode.insertBefore(clone, li.nextSibling);
                }
            });
            
            // Chart updates
            document.getElementById('main-content').addEventListener('blur', (e) => {
                const target = e.target;
                if (target.isContentEditable && target.dataset.chartId) {
                    updateChartFromKPI(target);
                }
            }, true);
            
            // Interact.js
            interact('.component-card')
                .draggable({
                    inertia: true,
                    modifiers: [
                        interact.modifiers.restrictRect({
                            restriction: 'parent',
                            endOnly: true
                        })
                    ],
                    autoScroll: true,
                    listeners: {
                        move(event) {
                            const target = event.target;
                            const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
                            const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

                            target.style.transform = `translate(${x}px, ${y}px)`;
                            target.setAttribute('data-x', x);
                            target.setAttribute('data-y', y);
                        }
                    }
                })
                .resizable({
                    edges: { left: false, right: true, bottom: true, top: false },
                    listeners: {
                        move(event) {
                            Object.assign(event.target.style, {
                                width: `${event.rect.width}px`,
                                height: `${event.rect.height}px`,
                            });
                            
                            // Explicitly remove flex properties that interfere with resizing
                            event.target.style.flexGrow = '0';
                            event.target.style.flexShrink = '0';

                            const canvas = event.target.querySelector('canvas');
                            if (canvas && chartInstances.has(canvas.id)) {
                                chartInstances.get(canvas.id).resize();
                            }
                        }
                    },
                    modifiers: [
                        interact.modifiers.restrictSize({
                            min: { width: 300, height: 200 }
                        })
                    ]
                });
        }
        
        function duplicateCard(card) {
            const clone = card.cloneNode(true);
            clone.id = `component-${Date.now()}-${Math.random()}`;
            const currentX = parseFloat(card.dataset.x) || 0;
            const currentY = parseFloat(card.dataset.y) || 0;
            const newX = currentX + 30;
            const newY = currentY + 30;
            
            clone.dataset.x = newX;
            clone.dataset.y = newY;
            clone.style.transform = `translate(${newX}px, ${newY}px)`;
            
            const oldCanvas = card.querySelector('canvas');
            const newCanvas = clone.querySelector('canvas');
            let chartDataToRender = null;

            if(oldCanvas && newCanvas) {
                const oldChart = chartInstances.get(oldCanvas.id);
                if(oldChart) {
                    chartDataToRender = oldChart.config.data;
                }
                const newCanvasId = `${clone.id}-chart-clone`;
                newCanvas.id = newCanvasId;
            }

            card.parentNode.appendChild(clone);
            
            if(newCanvas && chartDataToRender){
                renderChart(newCanvas.id, {
                    labels: chartDataToRender.labels,
                    datasets: chartDataToRender.datasets.map(ds => ({
                        name: ds.label,
                        type: ds.type.toUpperCase(),
                        values: ds.data
                    }))
                });
            }

            clone.querySelector('.delete-btn')?.addEventListener('click', () => clone.remove());
            clone.querySelector('.duplicate-btn')?.addEventListener('click', () => duplicateCard(clone));
        }

        function updateChartFromKPI(kpiElement) {
            const chartId = kpiElement.dataset.chartId;
            const kpiType = kpiElement.dataset.kpiType;
            const chart = chartInstances.get(chartId);

            if (!chart) return;

            const newValue = parseFloat(kpiElement.textContent.replace(/[^0-9.]/g, ''));
            if (isNaN(newValue)) return;
            
            let datasetIndex = -1;
            if (kpiType === 'FY24Revenue') datasetIndex = 0;
            if (kpiType === 'FY24EBITDA') datasetIndex = 1;

            if (datasetIndex !== -1) {
                const dataArray = chart.data.datasets[datasetIndex].data;
                const lastIndex = dataArray.length - 1;
                dataArray[lastIndex] = newValue;
                chart.update();
            }
        }
    </script>
</body>
</html>